<%- include('partials/header') %>

<section class="section">
    <div class="container">
        <div class="box p-5">
            <div class="has-text-centered">
                <h1 class="title is-3 mb-4"><%= meal.strMeal %></h1>
                <div class="is-flex is-justify-content-center is-align-items-center mt-2">
                    <p class="mr-4"><strong>Category:</strong> <%= meal.strCategory %></p>
                    <p><strong>Origin:</strong> <%= meal.strArea %></p>
                </div>

                <div class="is-flex is-justify-content-center is-align-items-center my-5 ">
                    <figure class="image recipe-image">
                        <img src="<%= meal.strMealThumb %>" alt="<%= meal.strMeal %> image">
                    </figure>
                </div>

                <!-- Collapsible Ingredients -->
                <div class="columns is-justify-content-center mt-5">
                    <div class="column is-10">
                        <details>
                            <summary class="button is-fullwidth is-primary has-text-centered">
                                <strong>Ingredients</strong>
                            </summary>
                            <div class="content has-text-centered mt-3">
                                <div class="columns is-multiline">
                                    <% for (let i = 1; i <= 20; i++) { %>
                                        <% if (meal[`strIngredient${i}`] && meal[`strMeasure${i}`]) { %>
                                            <div class="column is-5 has-text-centered">
                                                <p><%= meal[`strMeasure${i}`] %> <%= meal[`strIngredient${i}`] %></p>
                                            </div>
                                        <% } %>
                                    <% } %>
                                </div>
                            </div>
                        </details>
                    </div>
                </div>

                <!-- Collapsible Instructions -->
                <div class="columns is-justify-content-center mt-5">
                    <div class="column is-10">
                        <details>
                            <summary class="button is-fullwidth is-primary has-text-centered">
                                <strong>Instructions</strong>
                            </summary>
                            <div class="content has-text-left mt-3">
                                <% instructions.forEach((step) => { %>
                                    <p><%= step %></p>
                                <% }) %>
                            </div>
                        </details>
                    </div>
                </div>

                <!-- Video and Source Links -->
                <% if (meal.strYoutube || meal.strSource) { %>
                    <div class="is-flex is-justify-content-center is-align-items-center mt-4">
                        <% if (meal.strYoutube) { %>
                            <p class="mr-4"><strong>Video:</strong> <a class="is-link" href="<%= meal.strYoutube %>" target="_blank">Watch on YouTube</a></p>
                        <% } %>
                        <% if (meal.strSource) { %>
                            <p><strong>Source:</strong> <a class="is-link" href="<%= meal.strSource %>" target="_blank"><%= meal.strSource %></a></p>
                        <% } %>
                    </div>
                <% } %>
            </div>
        </div>
    </div>
</section>

<%- include('partials/footer') %>